<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>flashCharge Mobile</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, viewport-fit=cover" />
  <link rel="stylesheet" href="style.css" />
  <link rel="stylesheet" href="charging-summary.css" />
</head>

<body>
  <div class="mobile-container">
    <div class="mobile-header">
      <h1>
        <button id="back-btn" class="back-btn">‚Üê Back</button>
        <span>‚ö° flashCharge</span>
        <button id="logout-btn" class="logout-btn">Logout</button>
      </h1>
      <div class="charger-id" id="charger-display" title="Click to change charger">RIVOT_100A_01</div>
      <div class="connection-status">
        <span class="status-dot" id="ocpp-status"></span>
        <span class="status-text" id="ocpp-text">Checking...</span>
      </div>
    </div>

    <div class="status-bar">
      <span>Status: <strong id="status">--</strong></span>
    </div>

    <div class="vehicle-info">
      <div class="info-item">
        <span class="info-label">Model:</span>
        <span class="info-value" id="vehicle-model">--</span>
      </div>
      <div class="info-item">
        <span class="info-label">Range:</span>
        <span class="info-value"><span id="current-range">--</span> / <span id="max-range">--</span> km</span>
      </div>
    </div>

    <div class="gauge-section">
      <div class="ev-gauge">
        <svg viewBox="0 0 200 200">
          <defs>
            <linearGradient id="socGradient" x1="0%" y1="0%" x2="100%" y2="0%">
              <stop offset="0%" stop-color="#3b82f6"/>
              <stop offset="100%" stop-color="#10b981"/>
            </linearGradient>
          </defs>
          <circle cx="100" cy="100" r="85" stroke="rgba(255,255,255,0.1)" stroke-width="14" fill="none"/>
          <circle id="soc-ring" cx="100" cy="100" r="85" stroke="url(#socGradient)" stroke-width="14" fill="none" stroke-linecap="round" stroke-dasharray="534" stroke-dashoffset="534" transform="rotate(-90 100 100)"/>
        </svg>
        <div class="ev-gauge-center">
          <div id="soc-value">--</div>
          <span>%</span>
          <div class="soc-text">State of Charge</div>
        </div>
      </div>
    </div>

    <div class="metrics-grid">
      <div class="metric-card">
        <div class="metric-label">Voltage</div>
        <div class="metric-value" id="voltage">--</div>
      </div>
      <div class="metric-card">
        <div class="metric-label">Current</div>
        <div class="metric-value" id="current">--</div>
      </div>
      <div class="metric-card">
        <div class="metric-label">Power</div>
        <div class="metric-value" id="power">--</div>
      </div>
      <div class="metric-card">
        <div class="metric-label">Energy</div>
        <div class="metric-value" id="energy">--</div>
      </div>
      <div class="metric-card" style="grid-column: 1 / -1;">
        <div class="metric-label">Current Cost</div>
        <div class="metric-value" id="current-cost" style="color: #10b981;">‚Çπ0.00</div>
      </div>
    </div>

    <div class="controls-section">
      <button id="start-btn" class="ev-btn start">‚ö° START</button>
      <button id="stop-btn" class="ev-btn stop">‚õî STOP</button>
    </div>
    <div class="controls-section">
      <button id="end-session-btn" class="ev-btn end-session">üö® END SESSION</button>
    </div>
  </div>

  <!-- Charging Summary Modal -->
  <div id="summary-overlay" class="summary-overlay hidden">
    <div class="summary-modal">
      <div class="summary-header">
        <div class="summary-icon">‚úÖ</div>
        <h2 class="summary-title">Charging Complete!</h2>
        <p class="summary-subtitle" id="summary-timestamp">--</p>
      </div>

      <div class="summary-section">
        <div class="summary-section-title">Vehicle Status</div>
        <div class="summary-row">
          <span class="label">Battery:</span>
          <span class="value change" id="summary-soc">44% ‚Üí 80%</span>
        </div>
        <div class="summary-row">
          <span class="label">Range:</span>
          <span class="value change" id="summary-range">74km ‚Üí 135km</span>
        </div>
        <div class="summary-row">
          <span class="label">Energy Added:</span>
          <span class="value highlight" id="summary-energy">1.56 kWh</span>
        </div>
      </div>

      <div class="summary-section">
        <div class="summary-section-title">Payment Details</div>
        <div class="summary-row">
          <span class="label">Paid Amount:</span>
          <span class="value" id="summary-paid">‚Çπ20</span>
        </div>
        <div class="summary-row">
          <span class="label">Actual Cost:</span>
          <span class="value" id="summary-actual">‚Çπ10</span>
        </div>
      </div>

      <div id="refund-section" class="refund-message hidden">
        <div class="refund-amount" id="refund-amount">‚Çπ10</div>
        <div class="refund-text">will be added to your wallet</div>
        <div class="refund-text" style="margin-top: 4px; font-size: 10px;">üí≥ Refund will be processed within 24 hours</div>
      </div>

      <div class="summary-actions">
        <button class="summary-btn secondary" onclick="closeSummary()">Close</button>
        <button class="summary-btn primary" onclick="goToStations()">New Charge</button>
      </div>
    </div>
  </div>

  <script type="module" src="js/app.js?v=10"></script>
</body>
</html>

